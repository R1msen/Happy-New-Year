<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Marck+Script&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../–ü—É—Å—Ç—ã—à–∫–∞/css/style_bem.css">
    <title>–ù–æ–≤—ã–π –≥–æ–¥</title>
</head>
<body>
    <div class="letter">
        <p class="zero">
            –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ç—É—Ç –ø—É—Å—Ç–æ üòû
        </p>
    </div>
    <style>
        #snowflakeContainer {
          position: absolute;
          left: 0px;
          top: 0px;
          display: none;
        }
      
        .snowflake {
          position: fixed;
          background-color: #CCC;
          user-select: none;
          z-index: 1000;
          pointer-events: none;
          border-radius: 50%;
          width: 10px;
          height: 10px;
        }
      </style>
      
      <div id="snowflakeContainer">
        <span class="snowflake"></span>
      </div>
      
      <script>
        // –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ Snowflake
        var snowflakes = [];
      
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞
        var browserWidth;
        var browserHeight;
      
        // –£–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–Ω–µ–∂–∏–Ω–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–∏–º—ã–º–∏
        var numberOfSnowflakes = 50;
      
        // –§–ª–∞–≥ –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–Ω–µ–∂–∏–Ω–æ–∫
        var resetPosition = false;
      
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä enableAnimations
        var enableAnimations = false;
        var reduceMotionQuery = matchMedia("(prefers-reduced-motion)");
      
        // –ò–∑–º–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ enableAnimations
        function setAccessibilityState() {
          if (reduceMotionQuery.matches) {
            enableAnimations = false;
          } else { 
            enableAnimations = true;
          }
        }
        setAccessibilityState();
      
        reduceMotionQuery.addListener(setAccessibilityState);
      
        //
        // –í—Å–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å...
        //
        function setup() {
          if (enableAnimations) {
            window.addEventListener("DOMContentLoaded", generateSnowflakes, false);
            window.addEventListener("resize", setResetFlag, false);
          }
        }
        setup();
      
        //
        // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞ Snowflake
        //
        function Snowflake(element, speed, xPos, yPos) {
          // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Å–Ω–µ–∂–∏–Ω–∫–∏
          this.element = element;
          this.speed = speed;
          this.xPos = xPos;
          this.yPos = yPos;
          this.scale = 1;
      
          // –æ–±—ä—è–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è —Å–Ω–µ–∂–∏–Ω–∫–∏
          this.counter = 0;
          this.sign = Math.random() < 0.5 ? 1 : -1;
      
          // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–∑–º–µ—Ä–∞ —Å–Ω–µ–∂–∏–Ω–∫–∏ 
          this.element.style.opacity = (.1 + Math.random()) / 3;
        }
      
        //
        // –§—É–Ω–∫—Ü–∏—è, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å–Ω–µ–∂–∏–Ω–∫–∏
        //
        Snowflake.prototype.update = function () {
          // –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—é, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é x –∏ y
          this.counter += this.speed / 5000;
          this.xPos += this.sign * this.speed * Math.cos(this.counter) / 40;
          this.yPos += Math.sin(this.counter) / 40 + this.speed / 30;
          this.scale = .5 + Math.abs(10 * Math.cos(this.counter) / 20);
      
          // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é —Å–Ω–µ–∂–∏–Ω–∫–∏
          setTransform(Math.round(this.xPos), Math.round(this.yPos), this.scale, this.element);
      
          // –µ—Å–ª–∏ —Å–Ω–µ–∂–∏–Ω–∫–∞ –æ–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∏–∂–µ –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞, –ø–µ—Ä–µ–º–µ—Å—Ç–∏–º –µ–µ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞–≤–µ—Ä—Ö   
          if (this.yPos > browserHeight) {
            this.yPos = -50;
          }
        }
      
        //
        // –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ —Ä–∞–∑–º–µ—Ä —Å–Ω–µ–∂–∏–Ω–∫–∏
        //
        function setTransform(xPos, yPos, scale, el) {
          el.style.transform = `translate3d(${xPos}px, ${yPos}px, 0) scale(${scale}, ${scale})`;
        }
      
        //
        // –§—É–Ω–∫—Ü–∏—è, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–µ–∂–∏–Ω–∫–∏
        //
        function generateSnowflakes() {
      
          // –ø–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å–Ω–µ–∂–∏–Ω–∫–∏ –∏–∑ DOM –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ
          var originalSnowflake = document.querySelector(".snowflake");
      
          // –ø–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É —Ä–æ–¥–∏—Ç–µ–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–Ω–µ–∂–∏–Ω–∫–∏
          var snowflakeContainer = originalSnowflake.parentNode;
          snowflakeContainer.style.display = "block";
      
          // –ø–æ–ª—É—á–∞–µ–º —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞
          browserWidth = document.documentElement.clientWidth;
          browserHeight = document.documentElement.clientHeight;
      
          // —Å–æ–∑–¥–∞–µ–º —Å–Ω–µ–∂–∏–Ω–∫—É	
          for (var i = 0; i < numberOfSnowflakes; i++) {
      
            // –∫–ª–æ–Ω–∏—Ä—É–µ–º –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é —Å–Ω–µ–∂–∏–Ω–∫—É –∏ –¥–æ–±–∞–≤–ª—è–µ–º –µ–µ –≤ snowflakeContainer
            var snowflakeClone = originalSnowflake.cloneNode(true);
            snowflakeContainer.appendChild(snowflakeClone);
      
            // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –∏ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Å–Ω–µ–∂–∏–Ω–∫–∏
            var initialXPos = getPosition(50, browserWidth);
            var initialYPos = getPosition(50, browserHeight);
            var speed = 5 + Math.random() * 40;
      
            // —Å–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç Snowflake
            var snowflakeObject = new Snowflake(snowflakeClone,
              speed,
              initialXPos,
              initialYPos);
            snowflakes.push(snowflakeObject);
          }
      
          // —É–±–∏—Ä–∞–µ–º —Å–Ω–µ–∂–∏–Ω–∫—É, —Ç–∞–∫ –∫–∞–∫ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –æ–Ω–∞ –±—ã–ª–∞ –≤–∏–¥–∏–º–æ–π
          snowflakeContainer.removeChild(originalSnowflake);
      
          moveSnowflakes();
        }
      
        //
        // –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π —Å–Ω–µ–∂–∏–Ω–∫–∏, –≤—ã–∑—ã–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        //
        function moveSnowflakes() {
      
          if (enableAnimations) {
            for (var i = 0; i < snowflakes.length; i++) {
              var snowflake = snowflakes[i];
              snowflake.update();
            }      
          }
      
          // –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π –≤—Å–µ—Ö —Å–Ω–µ–∂–∏–Ω–æ–∫ –¥–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
          if (resetPosition) {
            browserWidth = document.documentElement.clientWidth;
            browserHeight = document.documentElement.clientHeight;
      
            for (var i = 0; i < snowflakes.length; i++) {
              var snowflake = snowflakes[i];
      
              snowflake.xPos = getPosition(50, browserWidth);
              snowflake.yPos = getPosition(50, browserHeight);
            }
      
            resetPosition = false;
          }
      
          requestAnimationFrame(moveSnowflakes);
        }
      
        //
        
        function getPosition(offset, size) {
          return Math.round(-1 * offset + Math.random() * (size + 2 * offset));
        }
      
        //
        // –°–±—Ä–æ—Å –ø–æ–∑–∏—Ü–∏–π –≤—Å–µ—Ö —Å–Ω–µ–∂–∏–Ω–æ–∫
        //
        function setResetFlag(e) {
          resetPosition = true;
        }
      </script>
</body>
</html>